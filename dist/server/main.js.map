{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@angular/router/router.d.ts.Éµangular_packages_router_router_l.html","webpack:///./src/app/app-routing.module.ts","webpack:///./src/app/app.component.html","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/app.server.module.ts","webpack:///./src/app/done-list/done-list.component.html","webpack:///./src/app/done-list/done-list.component.ts","webpack:///./src/app/loader-interceptor.service.ts","webpack:///./src/app/loader.service.ts","webpack:///./src/app/model/task.ts","webpack:///./src/app/new-task/new-task.component.html","webpack:///./src/app/new-task/new-task.component.ts","webpack:///./src/app/tasks.service.ts","webpack:///./src/app/todo-list/todo-list.component.html","webpack:///./src/app/todo-list/todo-list.component.ts","webpack:///./src/environments/environment.ts","webpack:///./src/main.server.ts","webpack:///external \"@angular/animations\"","webpack:///external \"@angular/animations/browser\"","webpack:///external \"@angular/common\"","webpack:///external \"@angular/common/http\"","webpack:///external \"@angular/core\"","webpack:///external \"@angular/forms\"","webpack:///external \"@angular/platform-browser\"","webpack:///external \"@angular/platform-browser/animations\"","webpack:///external \"@angular/platform-server\"","webpack:///external \"@angular/router\"","webpack:///external \"@ng-toolkit/universal\"","webpack:///external \"@nguniversal/module-map-ngfactory-loader\"","webpack:///external \"rxjs\"","webpack:///external \"rxjs/operators\""],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","<router-outlet></router-outlet>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { TodoListComponent } from './todo-list/todo-list.component';\nimport { DoneListComponent } from './done-list/done-list.component';\n\nconst routes: Routes = [\n  {path: '', redirectTo: 'todos', pathMatch: 'full'},\n  {path: 'todos', component: TodoListComponent},\n  {path: 'done', component: DoneListComponent}\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","<div>\n  <ul>\n    <li routerLink='/todos' class=\"clickable\">Todo list</li>\n    <li routerLink='/done' class=\"clickable\">Done</li>\n  </ul>\n\n  <img src=\"../assets/loader.gif\" *ngIf=\"isLoading$ | async\" />\n</div>\n\n<router-outlet></router-outlet>\n","import { Component } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { LoaderService } from './loader.service';\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.scss']\n})\nexport class AppComponent {\n  title = 'todo';\n\n  public isLoading$: Observable<boolean> = this.loader.getOnGoingRequests();\n\n  constructor(private loader: LoaderService) {}\n}\n","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport { AppRoutingModule } from './app-routing.module';\nimport { AppComponent } from './app.component';\nimport { TodoListComponent } from './todo-list/todo-list.component';\nimport { DoneListComponent } from './done-list/done-list.component';\nimport { NewTaskComponent } from './new-task/new-task.component';\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { CommonModule } from '@angular/common';\nimport { NgtUniversalModule } from '@ng-toolkit/universal';\nimport { LoaderInterceptorService } from './loader-interceptor.service';\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    TodoListComponent,\n    DoneListComponent,\n    NewTaskComponent\n  ],\n  imports: [\n    BrowserModule.withServerTransition({ appId: 'serverApp' }),\n    AppRoutingModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    CommonModule,\n    NgtUniversalModule\n  ],\n  providers: [\n    {\n      provide: HTTP_INTERCEPTORS,\n      useClass: LoaderInterceptorService,\n      multi: true\n    }\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n","import { NgModule } from '@angular/core';\nimport { ServerModule, ServerTransferStateModule } from '@angular/platform-server';\n\nimport { AppModule } from './app.module';\nimport { AppComponent } from './app.component';\nimport { ModuleMapLoaderModule } from '@nguniversal/module-map-ngfactory-loader';\n\n@NgModule({\n  imports: [\n    AppModule,\n    ServerModule,\n    ModuleMapLoaderModule,\n    ServerTransferStateModule,\n  ],\n  bootstrap: [AppComponent],\n})\nexport class AppServerModule {}\n","<h1>What you have done so far:</h1>\n<ul>\n    <li *ngFor=\"let task of (tasks$ | async)\">{{task.name}}</li>\n</ul>\n\n<p *ngIf=\"(tasks$ | async).length > 0\">You finished {{(tasks$ | async).length}} tasks. Congratulations!</p>","import { Component } from '@angular/core';\nimport { TasksService } from '../tasks.service';\nimport { Observable } from 'rxjs';\nimport { ITask } from '../model/task';\n\n@Component({\n  selector: 'app-done-list',\n  templateUrl: './done-list.component.html',\n  styleUrls: ['../todo-list/todo-list.component.scss']\n})\nexport class DoneListComponent {\n\n  constructor(private tasksService: TasksService) { }\n\n  public tasks$: Observable<ITask[]> = this.tasksService.getDone();\n}\n","import { HttpInterceptor, HttpRequest, HttpHandler, HttpEvent, HttpEventType } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { LoaderService } from './loader.service';\n\nexport class LoaderInterceptorService implements HttpInterceptor {\n\n  constructor(private loaderService:LoaderService) {}\n\n  private static onGoingRequestsCount = 0;\n  private static isRequestOnGoing = false;\n\n  public intercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n    LoaderInterceptorService.onGoingRequestsCount++;\n    this.emitValues();\n    return next.handle(request).pipe(tap((val) => {\n      if (val.type === HttpEventType.Response) {\n        LoaderInterceptorService.onGoingRequestsCount--;\n        this.emitValues();\n      }\n    }));\n  }\n\n  private emitValues(): void {\n    if(LoaderInterceptorService.onGoingRequestsCount > 0 && LoaderInterceptorService.isRequestOnGoing) \n      return;\n\n    LoaderInterceptorService.isRequestOnGoing = ! LoaderInterceptorService.isRequestOnGoing;\n    this.loaderService.broadcast(LoaderInterceptorService.isRequestOnGoing);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject, BehaviorSubject, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class LoaderService {\n  private onGoingRequest$: Subject<boolean> = new BehaviorSubject(false);\n  constructor() { }\n\n\n  public getOnGoingRequests(): Observable<boolean> {\n    return this.onGoingRequest$;\n  }\n\n  public broadcast(value: boolean): void {\n    this.onGoingRequest$.next(value);\n  }\n}\n","export interface ITask {\n    name: string;\n}\n\nexport class Task implements ITask {\n    public _id: string;\n    public status: 'done' | 'todo' = 'todo';\n\n    constructor(public name: string) {}\n\n}","<form [formGroup]=\"newTask\" (ngSubmit)=\"save()\">\n    <span class=\"error\" *ngIf=\"newTask.invalid && (newTask.dirty || newTask.touched)\">This field might not be empty.</span>\n    <label>new task: <input formControlName=\"name\" disable=\"disable$ | async\" /></label>\n    <button type=\"submit\" [disabled]=\"!newTask.valid || (disable$ | async)\" class=\"clickable\">Save</button>\n</form>","import { Component } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { TasksService } from '../tasks.service';\nimport { LoaderService } from '../loader.service';\n\n@Component({\n  selector: 'app-new-task',\n  templateUrl: './new-task.component.html',\n  styleUrls: ['./new-task.component.scss']\n})\nexport class NewTaskComponent {\n\n  public newTask = new FormGroup({\n    name: new FormControl('', Validators.required)\n  });\n\n\n  public disable$ = this.loaderService.getOnGoingRequests();\n\n  constructor(private tasksService: TasksService, private loaderService: LoaderService) { }\n\n  public save(): void {\n    this.tasksService.addTask(this.newTask.value).subscribe(() => {\n      this.newTask.reset();\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Task, ITask } from './model/task';\nimport { Observable, Subject, BehaviorSubject } from 'rxjs';\nimport { map, tap, flatMap } from 'rxjs/operators';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class TasksService {\n\n  private API_ENDPOINT: string = 'https://e2e-workshop-backend.herokuapp.com';\n\n  private tasks$: Subject<Task[]> = new BehaviorSubject([]);\n\n  constructor(private http:HttpClient) {\n    this.retrieveTasks().subscribe();\n  }\n\n  public addTask(task: ITask): Observable<void> {\n    return this.http.post<Task>(`${this.API_ENDPOINT}/tasks`, new Task(task.name))\n    .pipe(flatMap(() => this.retrieveTasks()));\n  }\n\n  public finishTask(task: ITask): Observable<void> {\n    (<Task> task).status = 'done';\n    return this.http.put<Task>(`${this.API_ENDPOINT}/tasks/${(<Task> task)._id}`, task)\n    .pipe(flatMap(() => this.retrieveTasks()));\n  }\n  \n  public getTodo(): Observable<ITask[]> {\n    return this.tasks$.pipe(map(tasks => tasks.filter(task => task.status === 'todo')));\n  }\n\n  public getDone(): Observable<ITask[]> {\n    return this.tasks$.pipe(map(tasks => tasks.filter(task => task.status === 'done')));\n  }\n\n  private retrieveTasks(): Observable<void> {\n    return this.http.get<Task[]>(`${this.API_ENDPOINT}/tasks`).pipe(\n      tap(tasks => {\n        this.tasks$.next(tasks)\n      }),\n      flatMap(() => new Observable<void>(observer => {\n        observer.next();\n        observer.complete();\n      }))\n    );\n  }\n\n}\n","<h1>Todo</h1>\n<app-new-task></app-new-task>\n\n<ul>\n    <li *ngFor=\"let task of (tasks$ | async)\">{{task.name}} <span (click)=\"done(task)\" class=\"clickable\">mark as done</span></li>\n</ul>","import { Component } from '@angular/core';\nimport { TasksService } from '../tasks.service';\nimport { Observable } from 'rxjs';\nimport { ITask } from '../model/task';\n\n@Component({\n  selector: 'app-todo-list',\n  templateUrl: './todo-list.component.html',\n  styleUrls: ['./todo-list.component.scss']\n})\nexport class TodoListComponent {\n\n  constructor(private tasksService: TasksService) { }\n\n  public tasks$: Observable<ITask[]> = this.tasksService.getTodo();\n\n  public done(task: ITask): void {\n    this.tasksService.finishTask(task).subscribe();\n  }\n}\n","export const environment = {\n  production: true\n};\n","import { enableProdMode } from '@angular/core';\n\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nexport { AppServerModule } from './app/app.server.module';\n","module.exports = require(\"@angular/animations\");","module.exports = require(\"@angular/animations/browser\");","module.exports = require(\"@angular/common\");","module.exports = require(\"@angular/common/http\");","module.exports = require(\"@angular/core\");","module.exports = require(\"@angular/forms\");","module.exports = require(\"@angular/platform-browser\");","module.exports = require(\"@angular/platform-browser/animations\");","module.exports = require(\"@angular/platform-server\");","module.exports = require(\"@angular/router\");","module.exports = require(\"@ng-toolkit/universal\");","module.exports = require(\"@nguniversal/module-map-ngfactory-loader\");","module.exports = require(\"rxjs\");","module.exports = require(\"rxjs/operators\");"],"sourceRoot":""}